<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ninety-Nine</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root {
  --yellow: #f2c400;
  --white: #ffffff;
  --black: #000000;
}

* {
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  margin: 0;
  background: var(--yellow);
  color: var(--black);
  text-align: center;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  font-weight: 800;
}

main {
  padding: 30px 20px;
}

/* GO SCREEN */
#goScreen {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 60vh;
}

.go-btn {
  width: 160px;
  height: 160px;
  border-radius: 50%;
  border: 4px solid var(--white);
  color: var(--white);
  font-size: 40px;
  font-weight: 800;
  background: transparent;
  cursor: pointer;
}

/* AD */
#adScreen {
  display: none;
  font-size: 24px;
  font-weight: 600;
}

/* GAME */
#gameScreen {
  display: none;
}

#timer {
  font-size: 48px;
  font-weight: 800;
}

.subtitle {
  margin-top: 8px;
  font-size: 16px;
}

.numbers {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 16px;
  max-width: 360px;
  margin: 30px auto;
}

.number {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  border: 3px solid var(--white);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  font-weight: 600;
  cursor: pointer;
}

.number.selected {
  background: var(--white);
  color: var(--black);
}

/* RESULT */
#result {
  display: none;
  margin-top: 30px;
}

#winner {
  font-size: 28px;
  font-weight: 800;
}

.arrow {
  font-size: 32px;
  cursor: pointer;
  margin-top: 10px;
}

#details {
  display: none;
  margin-top: 20px;
}
</style>
</head>

<body>

<header>
  <div>Ninety-Nine</div>
  <div>⋮</div>
</header>

<main>

  <!-- GO -->
  <div id="goScreen">
    <button class="go-btn" onclick="startAd()">GO!</button>
  </div>

  <!-- AD -->
  <div id="adScreen">
    Advertisement<br>
    <span id="adTimer">5</span>
  </div>

  <!-- GAME -->
  <div id="gameScreen">
    <div id="timer">10</div>
    <div class="subtitle">0–9 voting…</div>

    <div class="numbers" id="numbers"></div>
  </div>

  <!-- RESULT -->
  <div id="result">
    <div id="winner">WINNER</div>
    <div class="arrow" onclick="toggleDetails()">⬇️</div>
    <div id="details"></div>
  </div>

</main>

<script>
let adTime = 5;
let round = 1;
let time = 10;
let selected = null;
let votes = Array(10).fill(0);

const goScreen = document.getElementById("goScreen");
const adScreen = document.getElementById("adScreen");
const gameScreen = document.getElementById("gameScreen");
const result = document.getElementById("result");
const timerEl = document.getElementById("timer");
const numbersEl = document.getElementById("numbers");

function startAd() {
  goScreen.style.display = "none";
  adScreen.style.display = "block";
  const adInterval = setInterval(() => {
    adTime--;
    document.getElementById("adTimer").innerText = adTime;
    if (adTime === 0) {
      clearInterval(adInterval);
      adScreen.style.display = "none";
      startGame();
    }
  }, 1000);
}

function startGame() {
  gameScreen.style.display = "block";
  createNumbers();
  startTimer();
}

function createNumbers() {
  numbersEl.innerHTML = "";
  for (let i = 0; i < 10; i++) {
    const div = document.createElement("div");
    div.className = "number";
    div.innerText = i;
    div.onclick = () => selectNumber(i, div);
    numbersEl.appendChild(div);
  }
}

function selectNumber(num, el) {
  document.querySelectorAll(".number").forEach(n => n.classList.remove("selected"));
  el.classList.add("selected");
  selected = num;
}

function startTimer() {
  timerEl.innerText = time;
  const interval = setInterval(() => {
    time--;
    timerEl.innerText = time;
    if (time === 0) {
      clearInterval(interval);
      endRound();
    }
  }, 1000);
}

function endRound() {
  if (selected !== null) votes[selected]++;
  round++;
  if (round <= 3) {
    time = 10;
    selected = null;
    startTimer();
  } else {
    showResult();
  }
}

function showResult() {
  gameScreen.style.display = "none";
  result.style.display = "block";

  const total = votes.reduce((a,b)=>a+b,0);
  let min = Infinity;
  let win = null;

  votes.forEach((v,i)=>{
    if (v > 0 && v < min) {
      min = v;
      win = i;
    }
  });

  document.getElementById("winner").innerText =
    `WINNER\n${win}\n${Math.round((min/total)*100)}%`;

  document.getElementById("details").innerHTML =
    votes.map((v,i)=>`${i}: ${total ? Math.round((v/total)*100) : 0}%`).join("<br>");
}

function toggleDetails() {
  const d = document.getElementById("details");
  d.style.display = d.style.display === "none" ? "block" : "none";
}
</script>

</body>
</html>
